<Window x:Class="OrgnTransplant.AddWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Регистрация на донор" Height="650" Width="700" WindowStartupLocation="CenterOwner">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" Margin="0,0,0,10">
                <TextBlock Text="Регистрация на донор" FontSize="22" FontWeight="Bold" Margin="0,0,0,20"/>

                <!-- Donor Type Selection -->
                <Border Background="#E8F4F8" Padding="15" CornerRadius="8" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Тип донор" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                        <StackPanel Orientation="Horizontal">
                            <RadioButton x:Name="LivingDonorRadio" Content="🧍 Жив донор (предварителна регистрация)"
                                         GroupName="DonorType" IsChecked="True" Margin="0,0,20,0"
                                         Checked="DonorType_Changed" FontSize="13"/>
                            <RadioButton x:Name="DeceasedDonorRadio" Content="⚰️ Починал донор (регистрация от семейство)"
                                         GroupName="DonorType" Checked="DonorType_Changed" FontSize="13"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
            <StackPanel Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" >
                <!-- Лична информация -->
                <TextBlock Text="Лична информация" FontWeight="Bold" Margin="0,10,0,5"/>
                <TextBlock Text="Три имена"/>
                <TextBox x:Name="FullNameBox" Margin="0,0,0,8"/>
                <TextBlock Text="Дата на раждане (дд/мм/гггг)" Margin="0,5,0,2"/>
                <TextBox x:Name="DOBBox" Margin="0,0,0,8" Width="200" HorizontalAlignment="Left">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush Stretch="None" AlignmentX="Left">
                                                <VisualBrush.Visual>
                                                    <TextBlock Text="дд/мм/гггг" Foreground="LightGray" Margin="5,0,0,0"/>
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                <TextBlock Text="Пол"/>
                <ComboBox x:Name="GenderBox" Width="120" Margin="0,0,0,8">
                    <ComboBoxItem Content="Мъж"/>
                    <ComboBoxItem Content="Жена"/>
                </ComboBox>
                <TextBlock Text="ЕГН/Личен номер"/>
                <TextBox x:Name="NationalIdBox" Margin="0,0,0,8"/>
                <TextBlock x:Name="PhoneLabel" Text="Телефон"/>
                <TextBox x:Name="PhoneBox" Margin="0,0,0,8"/>
                <TextBlock x:Name="EmailLabel" Text="Имейл"/>
                <TextBox x:Name="EmailBox" Margin="0,0,0,8"/>
                <TextBlock x:Name="AddressLabel" Text="Адрес"/>
                <TextBox x:Name="AddressBox" Margin="0,0,0,8"/>

                <!-- Медицинска информация -->
                <TextBlock Text="Медицинска информация" FontWeight="Bold" Margin="0,15,0,5"/>
                <TextBlock Text="Кръвна група"/>
                <ComboBox x:Name="BloodTypeBox" Width="120" Margin="0,0,0,8">
                    <ComboBoxItem Content="A"/>
                    <ComboBoxItem Content="B"/>
                    <ComboBoxItem Content="AB"/>
                    <ComboBoxItem Content="O"/>
                </ComboBox>
                <TextBlock Text="Резус фактор"/>
                <ComboBox x:Name="RhFactorBox" Width="120" Margin="0,0,0,8">
                    <ComboBoxItem Content="Положителен"/>
                    <ComboBoxItem Content="Отрицателен"/>
                </ComboBox>
                <TextBlock Text="Известни алергии"/>
                <TextBox x:Name="AllergiesBox" Margin="0,0,0,8"/>
                <TextBlock Text="Медицински състояния"/>
                <TextBox x:Name="ConditionsBox" Margin="0,0,0,8"/>
                <TextBlock Text="Текущи медикаменти"/>
                <TextBox x:Name="MedicationsBox" Margin="0,0,0,8"/>
                <TextBlock Text="Скорошни операции/хоспитализации"/>
                <TextBox x:Name="SurgeriesBox" Margin="0,0,0,8"/>
                <TextBlock Text="Инфекциозни заболявания"/>
                <ComboBox x:Name="InfectiousBox" Margin="0,0,0,8" SelectionChanged="InfectiousBox_SelectionChanged">
                    <ComboBoxItem Content="Няма"/>
                    <ComboBoxItem Content="HIV"/>
                    <ComboBoxItem Content="Хепатит B"/>
                    <ComboBoxItem Content="Хепатит C"/>
                    <ComboBoxItem Content="Друго"/>
                </ComboBox>
                <TextBlock x:Name="InfectiousOtherLabel" Text="Опишете инфекциозното заболяване:" Visibility="Collapsed" Margin="0,5,0,2"/>
                <TextBox x:Name="InfectiousOtherBox" Visibility="Collapsed" Margin="0,0,0,8" TextWrapping="Wrap" Height="60"/>
                <TextBlock Text="Органи за донорство:" Margin="0,10,0,2"/>
                <WrapPanel x:Name="OrganPanel">
                    <CheckBox Content="Сърце" Margin="0,0,10,0"/>
                    <CheckBox Content="Бял дроб" Margin="0,0,10,0"/>
                    <CheckBox Content="Черен дроб" Margin="0,0,10,0"/>
                    <CheckBox Content="Бъбрек" Margin="0,0,10,0"/>
                    <CheckBox Content="Панкреас" Margin="0,0,10,0"/>
                    <CheckBox Content="Черен дроб" Margin="0,0,10,0"/>
                    <CheckBox Content="Стомах" Margin="0,0,10,0"/>
                    <CheckBox Content="Тимус" Margin="0,0,10,0"/>
                    <CheckBox Content="Артерия" Margin="0,0,10,0"/>
                </WrapPanel>

                <!-- Deceased Donor Specific Fields -->
                <StackPanel x:Name="DeceasedDonorPanel" Visibility="Collapsed">
                    <TextBlock Text="Информация за починал донор" FontWeight="Bold" Margin="0,15,0,5"/>

                    <TextBlock Text="Дата на смърт (дд/мм/гггг)" Margin="0,5,0,2"/>
                    <TextBox x:Name="DateOfDeathBox" Margin="0,0,0,4" Width="200" HorizontalAlignment="Left">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <VisualBrush Stretch="None" AlignmentX="Left">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="дд/мм/гггг" Foreground="LightGray" Margin="5,0,0,0"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    <TextBlock Text="Час на смърт (чч:мм)" Margin="0,5,0,2"/>
                    <TextBox x:Name="DeathTimeBox" Margin="0,0,0,8" Width="100" HorizontalAlignment="Left">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <VisualBrush Stretch="None" AlignmentX="Left">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="чч:мм" Foreground="LightGray" Margin="5,0,0,0"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>

                    <TextBlock Text="Причина за смърт" Margin="0,5,0,2"/>
                    <TextBox x:Name="CauseOfDeathBox" Margin="0,0,0,8" TextWrapping="Wrap" Height="60"/>

                    <TextBlock Text="Съгласие дадено от (име на роднина)" Margin="0,5,0,2"/>
                    <TextBox x:Name="FamilyConsentBox" Margin="0,0,0,8"/>

                    <TextBlock Text="Връзка с починалия" Margin="0,5,0,2"/>
                    <ComboBox x:Name="FamilyRelationshipBox" Margin="0,0,0,8" SelectionChanged="FamilyRelationshipBox_SelectionChanged">
                        <ComboBoxItem Content="Съпруг/а"/>
                        <ComboBoxItem Content="Син"/>
                        <ComboBoxItem Content="Дъщеря"/>
                        <ComboBoxItem Content="Родител"/>
                        <ComboBoxItem Content="Брат"/>
                        <ComboBoxItem Content="Сестра"/>
                        <ComboBoxItem Content="Друг роднина"/>
                    </ComboBox>
                    <TextBlock x:Name="FamilyRelationshipOtherLabel" Text="Опишете връзката:" Visibility="Collapsed" Margin="0,5,0,2"/>
                    <TextBox x:Name="FamilyRelationshipOtherBox" Visibility="Collapsed" Margin="0,0,0,8"/>

                    <TextBlock Text="Телефон за контакт (на роднината)" Margin="0,5,0,2"/>
                    <TextBox x:Name="FamilyContactPhoneBox" Margin="0,0,0,8"/>
                </StackPanel>

                <!-- Organ Viability Information -->
                <StackPanel x:Name="OrganViabilityPanel" Visibility="Collapsed">
                    <TextBlock Text="Информация за годност на органите" FontWeight="Bold" Margin="0,15,0,5"/>
                    <TextBlock Text="Дата на прибиране на органите (дд/мм/гггг)" Margin="0,5,0,2"/>
                <TextBox x:Name="HarvestDateBox" Margin="0,0,0,4" Width="200" HorizontalAlignment="Left">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush Stretch="None" AlignmentX="Left">
                                                <VisualBrush.Visual>
                                                    <TextBlock Text="дд/мм/гггг" Foreground="LightGray" Margin="5,0,0,0"/>
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                <TextBlock Text="Час на прибиране (чч:мм)" Margin="0,5,0,2"/>
                <TextBox x:Name="HarvestTimeBox" Margin="0,0,0,8" Width="100" HorizontalAlignment="Left">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush Stretch="None" AlignmentX="Left">
                                                <VisualBrush.Visual>
                                                    <TextBlock Text="чч:мм" Foreground="LightGray" Margin="5,0,0,0"/>
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8" Visibility="Collapsed">
                    <TextBlock Text="Час:" Margin="0,0,5,0" VerticalAlignment="Center"/>
                    <ComboBox x:Name="HarvestHourBox_OLD" Width="60" Margin="0,0,5,0">
                        <ComboBoxItem Content="00"/>
                        <ComboBoxItem Content="01"/>
                        <ComboBoxItem Content="02"/>
                        <ComboBoxItem Content="03"/>
                        <ComboBoxItem Content="04"/>
                        <ComboBoxItem Content="05"/>
                        <ComboBoxItem Content="06"/>
                        <ComboBoxItem Content="07"/>
                        <ComboBoxItem Content="08"/>
                        <ComboBoxItem Content="09"/>
                        <ComboBoxItem Content="10"/>
                        <ComboBoxItem Content="11"/>
                        <ComboBoxItem Content="12"/>
                        <ComboBoxItem Content="13"/>
                        <ComboBoxItem Content="14"/>
                        <ComboBoxItem Content="15"/>
                        <ComboBoxItem Content="16"/>
                        <ComboBoxItem Content="17"/>
                        <ComboBoxItem Content="18"/>
                        <ComboBoxItem Content="19"/>
                        <ComboBoxItem Content="20"/>
                        <ComboBoxItem Content="21"/>
                        <ComboBoxItem Content="22"/>
                        <ComboBoxItem Content="23"/>
                    </ComboBox>
                    <TextBlock Text=":" Margin="0,0,5,0" VerticalAlignment="Center"/>
                    <ComboBox x:Name="HarvestMinuteBox_OLD" Width="60">
                        <ComboBoxItem Content="00"/>
                        <ComboBoxItem Content="15"/>
                        <ComboBoxItem Content="30"/>
                        <ComboBoxItem Content="45"/>
                    </ComboBox>
                </StackPanel>
                    <TextBlock Text="Качество на органите"/>
                    <ComboBox x:Name="OrganQualityBox" Width="200" Margin="0,0,0,8" HorizontalAlignment="Left">
                        <ComboBoxItem Content="Отлично" Tag="Excellent"/>
                        <ComboBoxItem Content="Добро" Tag="Good"/>
                        <ComboBoxItem Content="Задоволително" Tag="Fair"/>
                        <ComboBoxItem Content="Лошо" Tag="Poor"/>
                    </ComboBox>
                </StackPanel>

                <!-- Additional Notes -->
                <TextBlock Text="Допълнителни бележки" FontWeight="Bold" Margin="0,15,0,5"/>
                <TextBox x:Name="AdditionalNotesBox" Margin="0,0,0,8" TextWrapping="Wrap" Height="80"
                         VerticalScrollBarVisibility="Auto" AcceptsReturn="True"/>

                <!-- Registration Tracking -->
                <TextBlock Text="Информация за регистрацията" FontWeight="Bold" Margin="0,15,0,5"/>
                <TextBlock Text="Регистрирано от (име на медицински персонал)" Margin="0,5,0,2"/>
                <TextBox x:Name="RegisteredByBox" Margin="0,0,0,8"/>
            </StackPanel>
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="Запази" Width="100" Click="Save_Click" Margin="0,0,10,0"/>
                <Button Content="Отказ" Click="Close_Click" Width="100"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
