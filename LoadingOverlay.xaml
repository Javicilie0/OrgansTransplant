<UserControl x:Class="OrgnTransplant.LoadingOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Background="#80000000">
        <Border Background="White"
                CornerRadius="10"
                Padding="30"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
            </Border.Effect>

            <StackPanel>
                <!-- Animated spinner -->
                <Grid Width="60" Height="60" Margin="0,0,0,20">
                    <Ellipse Width="60" Height="60"
                             Stroke="#667EEA"
                             StrokeThickness="6"
                             Opacity="0.3"/>
                    <Ellipse x:Name="SpinnerArc"
                             Width="60" Height="60"
                             Stroke="#667EEA"
                             StrokeThickness="6"
                             StrokeDashArray="30 70"
                             RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <RotateTransform x:Name="SpinnerRotation"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>
                </Grid>

                <!-- Loading text -->
                <TextBlock x:Name="LoadingText"
                           Text="Зареждане..."
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="#2C3E50"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>

    <!-- Animation -->
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                                   Storyboard.TargetProperty="Angle"
                                   From="0" To="360"
                                   Duration="0:0:1"
                                   RepeatBehavior="Forever"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>
</UserControl>
